package com.taro.service.device.impl;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;import java.util.Map;import org.apache.commons.collections4.CollectionUtils;import org.apache.commons.lang3.StringUtils;import com.taro.exception.BusinessException;import com.google.common.collect.Maps;import com.taro.dao.device.DeviceFuncDao;import com.taro.entity.device.DeviceFuncEntity;import com.taro.service.AbstractService;import com.taro.service.device.DeviceFuncService;import com.taro.utils.MyStringUtil;/** *<p>Title:DeviceFuncServiceImpl.java</p> *<p>Description: ServiceImpl</p> *@author 张宇唯 *@version 1.0 *@Automatically generate by Coder in 2020-11-16 11:26:19 */@Servicepublic class DeviceFuncServiceImpl extends AbstractService<DeviceFuncEntity> implements DeviceFuncService {		@Autowired	private DeviceFuncDao deviceFuncDao;	    @Override    protected DeviceFuncDao getDao() {        return deviceFuncDao;    }        @Override    public DeviceFuncEntity saveDeviceFunc (DeviceFuncEntity model) {    	if(null == model) {            throw new BusinessException("保存对象不能为空!");    	}else if(MyStringUtil.isBlank(model.getDevice_did())) {            throw new BusinessException("设备编码不能为空!");    	}    	        Map<String, Object> queryMap = Maps.newHashMap();        queryMap.put("sysFlag", "1");        queryMap.put("device_did", model.getDevice_did());        queryMap.put("c1", model.getC1());        List<DeviceFuncEntity> queryList = super.list(queryMap);        if(CollectionUtils.isNotEmpty(queryList)) {        	model.setId(queryList.get(0).getId());        }    	    	if(StringUtils.isBlank(model.getId())) {    		super.save(model);    	}else {    		super.update(model);    	}    	        return model;    }    public DeviceFuncEntity getByDevice(String device_did, String type) {        if (MyStringUtil.isBlank(device_did)) {            throw new BusinessException("设备编码不能为空");        }        if (MyStringUtil.isBlank(type)) {            throw new BusinessException("类型不能为空");        }                DeviceFuncEntity model = null;                Map<String, Object> queryMap = Maps.newHashMap();        queryMap.put("sysFlag", "1");        queryMap.put("device_did", device_did);        queryMap.put("c1", type);        List<DeviceFuncEntity> queryList = super.list(queryMap);        if(CollectionUtils.isNotEmpty(queryList)) {        	model = queryList.get(0);        }else {        	model = new DeviceFuncEntity();        	model.setDevice_did(device_did);        	model.setIs_phohe("1");        	model.setIs_usersign("1");        	model.setIs_username("0");        	model.setIs_busitype("0");        	model.setIs_cardnumber("0");        	model.setIs_remark("0");        	model.setIs_cardtype("0");        	model.setC1(type);        	model.setC2("0");        	model.setC3("0");        	model.setC4("0");        	model.setC5("0");        	model.setC6("0");        	model.setC7("0");        	model.setC8("0");        	model.setC9("0");        	model.setC10("0");        }        return model;    }    }